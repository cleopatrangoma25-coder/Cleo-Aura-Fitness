name: Uptime - Stage

on:
  schedule:
    - cron: '15 5 * * *' # daily at 05:15 UTC
  workflow_dispatch:

jobs:
  ping:
    runs-on: ubuntu-latest
    steps:
      - name: Ping stage hosting
        run: |
          set -e
          URL="https://cleo-aura-fitness-stage.web.app"
          STATUS=$(curl -s -o /dev/null -w "%{http_code}" "$URL")
          echo "Status: $STATUS"
          if [ "$STATUS" -ge 400 ]; then
            echo "Stage site unhealthy"
            exit 1
          fi
      - name: Write summary
        if: always()
        run: |
          echo "## Uptime Check" >> "$GITHUB_STEP_SUMMARY"
          echo "- URL: https://cleo-aura-fitness-stage.web.app" >> "$GITHUB_STEP_SUMMARY"
          echo "- Status: $STATUS" >> "$GITHUB_STEP_SUMMARY"
